---
- name: '{{ ansible_name_module }} | cmd:podman_container | Podman stop {{ module }}' 
  containers.podman.podman_container:
    detach: yes
    name: "coredns"
    pod: "cloudctl"
    state: "stopped"
    recreate: "false"
    image: "{{ upstream_registry }}/cloudctl/coredns"
    volume:
      - "{{ dir_platform }}/coredns/config.json:/CoreFile:z"
      - "{{ dir_platform }}/coredns/core.db:/core.db:z"

- name: '{{ ansible_name_module }} | cmd:podman_container | Podman restart {{ module }}' 
  containers.podman.podman_container:
    detach: yes
    name: "coredns"
    pod: "cloudctl"
    state: "started"
    recreate: "false"
    image: "{{ upstream_registry }}/cloudctl/coredns"
    volume:
      - "{{ dir_platform }}/coredns/config.json:/CoreFile:z"
      - "{{ dir_platform }}/coredns/core.db:/core.db:z"
